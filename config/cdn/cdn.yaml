kind: "CDN"
version: "1"
data:
  trafficFilters:
    rules:
      # Block simple path
      - name: block-path
        when:
          allOf:
            - reqProperty: tier
              equals: "publish"
            - reqProperty: path
              equals: '/block/me'
        action: block
      - name: block-path
        when:
          allOf:
            - reqProperty: tier
              equals: "publish"
            - reqProperty: path
              equals: '/block/secret'
            - reqHeader: "x-auth"
              doesNotEqual: "secret"
        action: block